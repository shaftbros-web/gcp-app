【問題1：VPC内のトラフィック制御】 要件: 3層（Web、API、DB）構成において、Web層からDB層への直接通信を遮断し、「Web→API→DB」の通信のみを許可したい。
• Q1-1: 各階層を別のサブネットワークに追加する。
    ◦ 【 No 】 サブネットを分けるだけでは、サブネット間の通信はデフォルトで可能な場合があり、トラフィックの厳密な制御にはならないため,。
• Q1-2: 個々のVMにソフトウェアベースのファイアウォールを設定する。
    ◦ 【 No 】 VMごとに個別のFWを設定することは管理・運用負荷が非常に大きく、推奨されるアーキテクチャではないため,。
• Q1-3: 各階層にタグを追加し、目的のトラフィックフローを許可するファイアウォールルールを設定する。
    ◦ 【 Yes 】 Google Cloudではルールとタグによってファイアウォールを適用するのがベストプラクティスであり、これによって各層のトラフィック制御が可能になるため,。
• Q1-4: 各層にタグを追加し、目的のトラフィックフローを可能にするルートを設定する。
    ◦ 【 No 】 ルート（ルーティング）はトラフィックの宛先を決定するものであり、セキュリティ的な通信の許可・拒否に使用するものではないため,。
【問題2：オンプレミスとの広帯域接続】 要件: 内部IP経由で高いスループットを必要とするオンプレミスのサービスと、遅延を最小限に抑えながら通信したい。
• Q2-1: オンプレミス環境とGCPの間にダイレクトピアリング接続を構成する。
    ◦ 【 No 】 ダイレクトピアリングはGoogleのパブリックIPへのアクセスを提供するものであり、VPC内の内部IPへの接続要件を満たさないため,。
• Q2-2: OpenVPNを使用してVPNトンネルを構成する。
    ◦ 【 No 】 ソフトウェアベースのVPNでは、エンタープライズレベルでの「高いスループットと最小遅延」の要件を満たすことが難しいため,。
• Q2-3: オンプレミス環境とGCPの間にCloud 専用 Interconnect接続を構成する。
    ◦ 【 Yes 】 専用InterconnectはオンプレミスとGoogleのネットワークを物理的に直接接続し、大量データを広帯域幅かつ低遅延で転送できるため,。
• Q2-4: Cloud VPNを使用してVPNトンネルを構成する。
    ◦ 【 No 】 Cloud VPNはインターネットを経由するIPsecトンネルであり、専用線と比較して帯域幅と低遅延の要件を確実には満たせないため,。
【問題3：マルチリージョンVPCとVPN接続】 要件: 2つのリージョンにまたがる単一のVPCと、オンプレミスのネットワークをVPNで通信させたい。
• Q3-1: 各リージョンにCloud VPNゲートウェイを展開し、オンプレミスのピアゲートウェイへのトンネルを構成する。
    ◦ 【 Yes 】 マルチリージョンのVPCと接続する場合、各リージョンにVPNゲートウェイを展開し、それぞれトンネルを設定するのが正しい構成であるため,。
• Q3-2: グローバルなCloud VPNゲートウェイを作成し、各リージョンからオンプレミスへ設定する。
    ◦ 【 No 】 Cloud VPNゲートウェイはリージョナルリソースであり、「グローバルなVPNゲートウェイ」という単一リソースは存在しないため,。
• Q3-3: VPCとオンプレミス間にVPCネットワークピアリングを使用する。
    ◦ 【 No 】 VPCネットワークピアリングはGCP内の異なるVPC同士を接続する機能であり、オンプレミス環境との接続には使えないため,。
• Q3-4: IAMとVPC Sharingを使ってVPCをオンプレミスネットワークに公開する。
    ◦ 【 No 】 共有VPCはプロジェクト間で同一ネットワークを共有する機能であり、オンプレミスへの接続手段ではないため,。
【問題4：移行時のIPアドレス競合回避】 要件: オンプレミスからGCPへの移行期間中、Cloud VPN接続時のルーティングの競合を防ぎたい。
• Q4-1: オンプレミスで使用している範囲と重複しないGCP上のIP範囲を使用する。
    ◦ 【 Yes 】 VPNや専用線でネットワークを接続する場合、ルーティングの競合を避けるためIP範囲を重複させない設計にする必要があるため,。
• Q4-2: オンプレミスで使用しているのと同じIPレンジをGCPで使用する。
    ◦ 【 No 】 両者で同じIPレンジを使用すると、トラフィックのルーティング競合が発生するため,。
• Q4-3: プライマリIPには同じIPレンジを、セカンダリIPには重複しないIPレンジを使用する。
    ◦ 【 No 】 セカンダリIPを分けても、プライマリIPレンジが重複している時点でルーティング競合が発生するため,。
• Q4-4: プライマリIPには重複しないIPレンジを、セカンダリIPには同じIPレンジを使用する。
    ◦ 【 No 】 プライマリIPを分けても、セカンダリIPが重複していれば同様に競合が発生するため,。
【問題5：高可用性ハイブリッド接続】 要件: オンプレミスとGCP間で、可用性99.9%を保証する本番レベルのハイブリッド接続を構築したい。
• Q5-1: 1つのメトロで2つの専用 Interconnect接続を構成し、別のメトロでさらに2つの接続を構成する。
    ◦ 【 Yes 】 可用性99.9%以上を確保するGoogle推奨のネットワーク構成は、複数のメトロ（都市）にわたって専用Interconnectを冗長構成することであるため,。
• Q5-2: 1つのメトロで2つのパートナー Interconnect接続を構成する。
    ◦ 【 No 】 1つのメトロだけの冗長化では、その地域全体がダウンする障害に対する耐性がなくSLAを保証できないため,。
• Q5-3: ダイレクトピアリングを設定し、少なくとも2つのロケーションとピアリングする。
    ◦ 【 No 】 ピアリングはプライベート接続要件やSLA保証付きのハイブリッド接続には該当しないため,。
• Q5-4: 2つのVPN接続を構成し、オンプレミスのVPNデバイスが別々のラックにあることを確認する。
    ◦ 【 No 】 デバイスを分けることは有効ですが、99.9%保証の本番接続においてはInterconnectのマルチメトロ構成がベストプラクティスとなるため,。
【問題6：ロードバランサのヘルスチェック】 要件: 外部IPを持たないロードバランサのバックエンドVMが、正常に応答しているのに1分ごとに再起動するのを防ぎたい。
• Q6-1: 各VMにパブリックIPを割り当て、ロードバランサからの通信を許可するファイアウォールを設定する。
    ◦ 【 No 】 「外部IPを持たない」という要件に反するため,。
• Q6-2: ヘルスチェックがインスタンスに到達することを許可するファイアウォールルールが存在するか確認する。
    ◦ 【 Yes 】 ヘルスチェック通信を許可するFWルールがないと正常なVMも異常とみなされて再起動されるため,。
• Q6-3: HTTP/HTTPSのソーストラフィックがロードバランサに到達することを許可するルールを確認する。
    ◦ 【 No 】 再起動の原因はヘルスチェック通信の到達失敗にあるため、ソーストラフィックの許可だけでは解決しないため,。
• Q6-4: ロードバランサ名からインスタンスタグ宛てへのファイアウォールルールを設定する。
    ◦ 【 No 】 LB名ではなく、ヘルスチェックの送信元IP範囲に対して許可ルールを設定する必要があるため,。
【問題7：Cloud CDNの最適化】 要件: Cloud CDNを利用している静的Webコンテンツのキャッシュヒット率を改善したい。
• Q7-1: HTTP(S)ヘッダのCache-Regionがユーザの最も近いリージョンを指すようにする。
    ◦ 【 No 】 CDNキャッシュヒット率向上の直接的なアプローチではないため,。
• Q7-2: キャッシュされたオブジェクトの有効期限を短くする。
    ◦ 【 No 】 有効期限を短くするとキャッシュが頻繁に破棄され、逆にヒット率が低下するため,。
• Q7-3: コンテンツをCloud Storageに複製し、そのバケットのLBにCDNを向ける。
    ◦ 【 No 】 データソースを移すだけであり、キャッシュのヒット率最適化そのものの手法ではないため,。
• Q7-4: キャッシュキーをカスタマイズして、キーからプロトコル（HTTP/HTTPSなど）を省略する。
    ◦ 【 Yes 】 デフォルトではURL完全一致（プロトコル含む）がキャッシュキーになるため、プロトコルを省略することでHTTPとHTTPSのリクエストでキャッシュを共有できヒット率が上がるため,。
【問題8：マルチクラスタIngress】 要件: 複数のリージョンに配置したGKEクラスタに対する、グローバルなネットワークIngressを実装したい。
• Q8-1: GKEでグローバルロードバランサーを構成する。
    ◦ 【 No 】 単一GKEクラスタに対するIngressではなく、複数リージョンを束ねる設定が必要であるため,。
• Q8-2: MIGに接続するグローバルロードバランサーを設定する。
    ◦ 【 No 】 GKE環境の要件に対し、MIG（マネージドインスタンスグループ）は不適切であるため,。
• Q8-3: グローバルLBとGKEでkubemciを構成する。
    ◦ 【 No 】 kubemciは現在非推奨となっており、Ingress for Anthosが推奨される手法であるため,。
• Q8-4: AnthosのIngressをグローバルロードバランサーとGKEで構成する。
    ◦ 【 Yes 】 マルチクラスタのIngressを導入・管理するためには Ingress for Anthos が推奨されるベストプラクティスであるため,。
【問題9：サーバーレスからオンプレへの通信】 要件: App Engineアプリケーションから、VPCネットワークを経由してオンプレミスのDBと通信したい。
• Q9-1: オンプレミスのホストのみにプライベート Google アクセスを設定する。
    ◦ 【 No 】 サーバーレス環境からの接続要件を満たす設定ではないため,,。
• Q9-2: サーバーレス VPC アクセスを構成する。
    ◦ 【 Yes 】 サーバーレスVPCアクセスを利用することで、App Engineなどのサーバーレス環境から内部IP経由でVPCネットワークへ直接接続できるため,,。
• Q9-3: プライベート Google アクセスを設定する。
    ◦ 【 No 】 これはVPC内からGoogleのAPIやサービスへアクセスするための機能であるため,,。
• Q9-4: サービスのプライベートアクセス（プライベート サービス アクセス）を設定する。
    ◦ 【 No 】 これはCloud SQL等のマネージドサービスとVPCを接続する機能であるため,,。
【問題10：データアクセス境界の作成】 要件: 指定したオフィスネットワークの外部から、Cloud Storage内の機密データへのアクセスを遮断したい。
• Q10-1: VPC Service Controlsの境界を作成し、オフィスネットワークのCIDRでアクセスレベルを作成する。
    ◦ 【 Yes 】 VPC Service Controlsでサービスを保護する境界を作成し、指定IP（オフィス）からのみアクセスを許可するのが最適であるため,。
• Q10-2: 業務時間に合わせてIAM権限を付与・削除するCloud Functionを作成しスケジュールする。
    ◦ 【 No 】 運用が複雑化し、ネットワーク（外部IP）に基づくアクセス制限にはならないため,。
• Q10-3: VPC内の全インスタンスに、オフィスのCIDRを許可する送信元ファイアウォールルールを作成する。
    ◦ 【 No 】 FWルールはVPC内のリソースを保護するものであり、Cloud StorageのようなAPIベースのマネージドサービスへのアクセス制限には使えないため,。
• Q10-4: オフィスへのCloud VPNを作成し、オンプレミスにプライベート Google アクセスを設定する。
    ◦ 【 No 】 既存のインターネット経由でのデータ流出・アクセス遮断の要件を直接満たすものではないため,。
【問題11：20Gbpsのプライベート接続】 要件: オンプレミスデータセンターとGCP間に、最低20Gbpsの帯域幅を持つプライベート接続を構築したい。
• Q11-1: Cloud CDNを作成し、専用 Interconnectを使用して接続する。
    ◦ 【 No 】 プライベートネットワーク接続においてCloud CDNの作成は不要・不適切であるため,。
• Q11-2: Cloud CDNを作成し、単一のCloud VPNを使用して接続する。
    ◦ 【 No 】 単一VPNでは20Gbpsの帯域を確保できず、CDNも無関係であるため,。
• Q11-3: VPCを作成し、専用 Interconnectを使用して接続する。
    ◦ 【 Yes 】 専用Interconnectは最大80Gbpsの広帯域と直接のプライベート接続を提供する機能であるため,。
• Q11-4: VPCを作成し、単一のCloud VPNを使用して接続する。
    ◦ 【 No 】 単一のVPNトンネルの帯域幅（数Gbps）では20Gbps要件を満たせないため,。
【問題12：WebSocketの負荷分散】 要件: WebサーバーでロードバランスされていないWebSocketとHTTPセッションを適切に負荷分散したい。
• Q12-1: WebSocketをHTTPストリーミングを使用するように変換する。
    ◦ 【 No 】 アプリケーションの改修が必要であり、非効率的であるため,。
• Q12-2: セキュリティチームと暗号化要件のみを確認する。
    ◦ 【 No 】 負荷分散の実現には無関係であるため,。
• Q12-3: セッションに依存しない分散型アーキテクチャに再設計する。
    ◦ 【 No 】 大幅な再設計の手間がかかるため,。
• Q12-4: HTTP(S)ロードバランサがネイティブサポートしているため、そのオプションについて話し合う。
    ◦ 【 Yes 】 GCPのHTTP(S)ロードバランサはWebSocketプロトコルをネイティブにサポートしているため、そのまま活用できるため,。
【問題13：サーバーレスのグローバル配信】 要件: 複数リージョンにデプロイしたCloud Runを、グローバルな顧客に低遅延かつ高可用性で提供したい。
• Q13-1: 複数AZにデプロイし、TCP/IPグローバルLBのバックエンドにCloud Run Endpointsを追加する。
    ◦ 【 No 】 Cloud Runなどのサーバーレス環境はTCP/IP LBではなくHTTP(S)LBと組み合わせるべきであるため,。
• Q13-2: 複数リージョンにデプロイし、Cloud DNSでレイテンシベースのDNS名を作成する。
    ◦ 【 No 】 グローバルな負荷分散・ルーティングにおいてはLBの機能を使うのが最適であるため,。
• Q13-3: サーバーレスNEGを作成し、グローバルHTTP(S)LBのバックエンドサービスに追加する。
    ◦ 【 Yes 】 Cloud Runのサービスをサーバーレスネットワークエンドポイントグループ（NEG）として指定し、グローバルHTTP(S)LBのバックエンドにすることでグローバルルーティングが実現できるため,。
• Q13-4: Cloud Endpointsを作成し、グローバルHTTP(S)LBのバックエンドにアタッチする。
    ◦ 【 No 】 サーバーレスリソースをバックエンドにするにはCloud EndpointsではなくNEGを使用する必要があるため,。
【問題14：VMの外部IPアドレス制限】 要件: VPC内のすべてのVMにおいて、承認された特定のインスタンスのみ外部IPを持てるよう強制したい。
• Q14-1: カスタムVPCで新サブネットを作成し、インターネットゲートウェイへのデフォルトルートを設定する。
    ◦ 【 No 】 ルートの設定では特定のVMへの外部IPアドレスの付与自体を強制的に制限することはできないため,。
• Q14-2: Cloud NATを導入し、外部IPの必要性を完全に排除する。
    ◦ 【 No 】 「承認された特定のインスタンスのみ外部IPを持てるようにする」という要件を満たせないため,。
• Q14-3: constraints/compute.vmExternalIpAccessの組織ポリシーを設定し、許可リストにインスタンスを列挙する。
    ◦ 【 Yes 】 組織ポリシーを使用することで、指定したリスト（allowedValues）のVM以外には外部IPを付与できなくする強制制限が可能であるため,。
• Q14-4: 全VPCのデフォルトルートを削除し、承認されたVMをデフォルトルートのある新サブネットに移動する。
    ◦ 【 No 】 ルートの制御であり、外部IPアドレスの割り当て制限の解決策ではないため,。
【問題15：大容量DBのプライベートレプリケーション】 要件: 4TBのオンプレミスDBのバックアップレプリカを、プライベートアドレス空間でGCPに構築したい。
• Q15-1: データセンターネットワークに接続されたCloud VPNを使用する。
    ◦ 【 No 】 4TBの大規模な更新が頻繁にある場合、VPNの帯域幅では不足する可能性があるため,。
• Q15-2: オンプレミスに設置されたNATとTLS変換ゲートウェイを使用する。
    ◦ 【 No 】 インターネットを経由してしまい、プライベートアドレス空間の通信要件を満たさないため,。
• Q15-3: Google Cloud 専用Interconnectを使用する。
    ◦ 【 Yes 】 専用Interconnectは物理的な直接接続であり、大容量データの転送とRFC1918のプライベート通信を高速に提供するため,。
• Q15-4: VPNサーバーがインストールされたCompute Engineインスタンスを構成する。
    ◦ 【 No 】 マネージドサービスではなく可用性や帯域幅に課題が生じるため,。
【問題16：DR用ハイブリッド接続の冗長化】 要件: オンプレミスとGCP間に、DR検証用の安全で冗長性のあるネットワーク接続を確立したい。
• Q16-1: Transfer Appliance障害時にダイレクトピアリングで接続できることを確認する。
    ◦ 【 No 】 デバイスとピアリングの組み合わせは、リアルタイムなネットワーク接続の冗長化構成ではないため,,。
• Q16-2: Transfer Appliance障害時にCloud VPNで接続できることを確認する。
    ◦ 【 No 】 同様の理由でリアルタイムなネットワークの冗長構成ではないため,,。
• Q16-3: 専用 Interconnect障害時に、Cloud VPNで接続を確立できることを確認する。
    ◦ 【 Yes 】 異なるネットワークサービス（メインにInterconnect、バックアップにCloud VPN）を併用することで、冗長性と耐障害性が向上するため,,。
• Q16-4: 専用 Interconnect障害時に、ダイレクトピアリングで接続を確立できることを確認する。
    ◦ 【 No 】 ピアリングは安全なプライベート接続（IPsec等の暗号化されたVPC接続）のバックアップとしては不適切であるため,,。
【問題17：GKEクラスタの外部露出最小化】 要件: GKEクラスタの外部ネットワークへの露出を最小限に抑えたい。
• Q17-1: マスター認証ネットワークを有効にし、ファイアウォールルールを設定したパブリッククラスタを使用する。
    ◦ 【 No 】 パブリッククラスタである以上、外部へ露出するリスクが残るため,。
• Q17-2: ファイアウォールルールとVPCルートを持つパブリッククラスタを使用する。
    ◦ 【 No 】 コントロールプレーン等へのインターネットアクセスを完全に防ぐことはできないため,。
• Q17-3: マスター認証ネットワークが設定された、プライベートエンドポイントを持つプライベートクラスタを使用する。
    ◦ 【 Yes 】 プライベートエンドポイントのみを使用し、マスター認証ネットワークを組み合わせることで、コントロールプレーンへのインターネットアクセスを防止できるため,。
• Q17-4: マスター認証ネットワークが設定された、パブリックエンドポイントを持つプライベートクラスタを使用する。
    ◦ 【 No 】 プライベートクラスタであってもパブリックエンドポイントを有効にすると露出してしまうため,。
【問題18：VPNのレイテンシとパケットロス改善】 要件: オンプレミスとGCP間のVPN接続で発生しているレイテンシとパケットロスを解消したい。
• Q18-1: VPN接続を追加し、負荷分散する。
    ◦ 【 No 】 スループット（帯域）は増えるが、インターネット経由のレイテンシ自体の問題は解決しないため,。
• Q18-2: 複製されたトランザクションをCloud Pub/Subに送信する。
    ◦ 【 No 】 ネットワーク接続のレイテンシを解決するインフラ側のアプローチではないため,。
• Q18-3: UDPを使用するようにレプリケーションを設定する。
    ◦ 【 No 】 データベースレプリケーションなどTCPを必要とする通信では機能しないため,。
• Q18-4: Google Cloud 専用 Interconnect を設定する。
    ◦ 【 Yes 】 レイヤー2の物理的な専用ネットワークを経由することで、インターネット特有のレイテンシやパケットロスの問題が解消されるため,。
【問題19：専用線の追加拡張】 要件: 既存のポリシー要件を満たしつつ、オンプレミスとGCP間の安全かつ高速な接続を拡張したい。
• Q19-1: 新しいCarrier Peering接続を追加する。
    ◦ 【 No 】 プライベートな高速接続の拡張としては要件を満たさないため,。
• Q19-2: 既存の専用Interconnect接続の帯域幅を100Gにアップグレードする。
    ◦ 【 No 】 接続そのものを拡張（追加）する手段ではないため,。
• Q19-3: 3つの新しいCloud VPN接続を追加する。
    ◦ 【 No 】 高速な接続（大帯域）の拡張としてVPNを追加するのは最適なアプローチではないため,。
• Q19-4: 新しい専用 Interconnect接続を追加する。
    ◦ 【 Yes 】 既存の安全かつ高速なアーキテクチャを維持したまま、そのまま接続（帯域と冗長性）を拡張する正当な方法であるため,。
【問題20：VPCの厳格なEgress制御】 要件: VPC内の全VMから、Active Directoryへの通信のみを許可し、その他の送信トラフィックを完全に拒否したい。
• Q20-1: 優先度100で全てを拒否し、優先度1000でADを許可する。
    ◦ 【 No 】 優先度は数字が低いほど強いため、全て拒否のルールが勝ってAD通信もブロックされてしまうため,,。
• Q20-2: 優先度1000でADを許可し、優先度100の暗黙の拒否に依存する。
    ◦ 【 No 】 Egressの暗黙ルールは「許可」であり、また暗黙のルールの優先度は最低(65535)であるため,,。
• Q20-3: 優先度100でADを許可し、優先度1000の暗黙の拒否に依存する。
    ◦ 【 No 】 前述同様、Egressには暗黙の許可ルールが存在するため、明示的な全体拒否ルールを作成しないとすべて外に出れてしまうため,,。
• Q20-4: 優先度1000で全てを拒否し、優先度100でADトラフィックを許可する。
    ◦ 【 Yes 】 優先度の高い（数値が低い）ルールでADを許可し、優先度の低い（数値が高い）ルールで残りのすべてをブロックすることで要件を満たせるため,,。
【問題21：オンプレからのBigQueryアクセス保護】 要件: オンプレからVPN経由でBigQueryを利用する際、インサイダー等によるデータ流出を防止したい。
• Q21-1: プライベート Google アクセスのみを設定する。
    ◦ 【 No 】 内部IP経由でのアクセスは可能になるが、権限を持つインサイダーが外部にデータを持ち出すリスクは防げないため,。
• Q21-2: プライベート Google アクセスをオンプレミスのみに設定する。
    ◦ 【 No 】 同様に、境界制御が不十分なため,。
• Q21-3: サービスアカウントを作成し、IAM権限を厳格に割り当て他の全アクセスを削除する。
    ◦ 【 No 】 IAMはIDベースの制御であり、正規の権限を持つユーザーが外部（自宅のネットワーク等）からアクセスしてデータを抜くことをネットワークレベルで防げないため,。
• Q21-4: VPC Service Controlsを構成し、プライベート Google アクセスを構成する。
    ◦ 【 Yes 】 VPC Service Controlsでサービスを囲む境界を作成することで、許可されたVPCネットワーク（オンプレミス含む）のクライアントからのみのアクセスに制限でき、データの持ち出しを防げるため,。
【問題22：URLパスベースのルーティング】 要件: パス（URL）に基づいてトラフィックを異なるバックエンドに振り分け、エンドツーエンドの暗号化を確保したい。
• Q22-1: グローバルフォワーディングルールを作成し、SSLプロキシLBを設定する。
    ◦ 【 No 】 SSLプロキシロードバランサーはURLのパスに基づいたレイヤ7のルーティングに対応していないため,。
• Q22-2: URL Mapsを使ってHTTPSロードバランサーを作成する。
    ◦ 【 Yes 】 HTTPSロードバランサーの「URLマップ」機能を使用することで、パス（例: /audio や /video）に基づいて異なるバックエンドへルーティングできるため,。
• Q22-3: 適切なMIGを作成し、SSLプロキシLBを設定する。
    ◦ 【 No 】 パスベースのルーティングができないため,。
• Q22-4: URLマップを使ったクロスリージョンのロードバランサーを作成する。
    ◦ 【 No 】 標準的なグローバルのHTTPSロードバランサーを使用すべきであるため,。
【問題23：重複IPレンジの統合回避】 要件: 買収企業のVPCと自社データセンター接続時、重複するRFC 1918の競合を回避したい。
• Q23-1: 新しいVPCとCloud Routerを作成し、IP空間が重ならない新しいIPアドレスを適用する。
    ◦ 【 Yes 】 重複したIP空間のまま接続するとルーティング競合が発生するため、重複しない新しいIP範囲でVPCを作り直すのが正しいネットワーク設計であるため,,。
• Q23-2: Cloud VPN接続を作成し、Cloud NATインスタンスで重複空間にNATを実行する。
    ◦ 【 No 】 オンプレミス間でのVPC接続において重複回避のために複雑なNATを組むことは通常推奨されないため,,。
• Q23-3: カスタムルートアドバタイズメントを適用して重複IPスペースをブロックする。
    ◦ 【 No 】 既存のアドバタイズをブロックリストで拒否する設定はできないため,,。
• Q23-4: 重複IPをブロックするファイアウォールルールを適用する。
    ◦ 【 No 】 FWルールはアクセス制御用であり、トラフィックのルーティングそのものの競合は解決できないため,,。
【問題24：プライベートGKEから外部APIへのアクセス】 要件: パブリックIPを持たないGKEクラスタから、インターネット上のサードパーティAPIへアクセスしたい。
• Q24-1: GCEインスタンスにNATプロキシをインストールし、全ワークロードを経由させる。
    ◦ 【 No 】 自前でNATインスタンスを構築・運用することはオーバーヘッドが高く、クラウドのベストプラクティスではないため,。
• Q24-2: GKEをプライベートクラスタにし、サブネットにCloud NAT Gatewayを設定する。
    ◦ 【 Yes 】 Cloud NATを使用することで、外部IPを持たないプライベートクラスタのノードやPodからインターネットへ安全に送信通信（外部APIコール等）が可能になるため,。
• Q24-3: GKEをプライベートクラスタにし、VPCでプライベート Google アクセスを構成する。
    ◦ 【 No 】 プライベートGoogleアクセスは「Googleのサービス（BigQueryなど）」への通信用であり、外部のサードパーティAPIへのアクセス要件は満たせないため,。
• Q24-4: ルートベースのクラスタにし、VPCでプライベート Google アクセスを構成する。
    ◦ 【 No 】 インターネットアクセス要件が解決しないため,。
【問題25：GKEのマルチリージョンルーティング】 要件: アジアのユーザーのレイテンシ削減のため、アジアにGKEを追加し適切にルーティングしたい。
• Q25-1: asia-southeast1にGKEを追加し、kubemciを使用してグローバルHTTP(S)LBを作成する。
    ◦ 【 Yes 】 複数リージョンのクラスタを統合するIngress（当時の機能としてのkubemci、現在はAnthos等）を使うことで、レイテンシベースで最も近いクラスタへルーティングできるため,。
• Q25-2: クラスタ内のアプリケーションに割り当てるメモリとCPUを増やす。
    ◦ 【 No 】 インスタンスの処理能力を上げても、地理的な距離によるネットワークレイテンシは解消されないため,。
• Q25-3: クラウドCDNを有効にしたグローバルHTTPロードバランサーを使用する。
    ◦ 【 No 】 APIの動的なデータ処理はCDNキャッシュで解決できず、アジア側のコンピュートリソース展開が必要なため,。
• Q25-4: LoadBalancerタイプのサービスで両方を公開し、パブリックIPをCloud DNSに追加する。
    ◦ 【 No 】 グローバルロードバランサーによる単一IPのAnycastルーティングのメリットを受けられなくなるため,。
【問題26：新旧APIのパスベース・ルーティング】 要件: 古いAPIと新しいAPIを同じSSL/DNSで共存させ、パスに基づいてトラフィックを振り分けたい。
• Q26-1: 新しいAPIの新しいエンドポイントを使用するように古いクライアントを再設定する。
    ◦ 【 No 】 顧客（クライアント側）の再設定を強いることは安定性を損なうため,。
• Q26-2: 新しいバージョンのAPI用に新しいロードバランサーを設定する。
    ◦ 【 No 】 同じSSL証明書とDNSレコードを維持するという要件に反するため,。
• Q26-3: 古いAPIに、パスに基づいて新しいAPIにトラフィックを転送させる。
    ◦ 【 No 】 アプリケーションの実装が複雑になり、不要な不具合リスクを生むため,。
• Q26-4: ロードバランサのバックエンドで、各APIパスに別々のバックエンドプールを使用する。
    ◦ 【 Yes 】 HTTP(S)ロードバランサのURLマップ機能で、リクエストパスに応じて新旧それぞれのAPIバックエンドへ安全に振り分けできるため,。
【問題27：外部インターネットなしでのファイル取得】 要件: インターネットアクセスを持たないVMに、オンプレ接続なしでファイルを安全にダウンロードしたい。
• Q27-1: Cloud Source Repositoriesにアップロードし、IP範囲外をFWでブロックする。
    ◦ 【 No 】 Source Repositoriesはソースコード管理用であり、バイナリやソフトウェアファイルの保管には不向きなため,。
• Q27-2: Cloud Storageにアップロードし、IP範囲外をFWでブロックする。
    ◦ 【 No 】 FWで外部IPをブロックしただけでは、パブリックアクセスが残るリスクがあり根本解決にならないため,。
• Q27-3: Source Repositoriesにアップロード後、プライベートGoogleアクセスを設定しgcloudでDLする。
    ◦ 【 No 】 同様に、バイナリ保管場所として不適切なため,。
• Q27-4: Cloud Storageにアップロード後、プライベートGoogleアクセスを設定しgsutilでDLする。
    ◦ 【 Yes 】 プライベートGoogleアクセスを使えば、インターネットの外部IPを持たないVMからでも内部IPのみでCloud Storageへ安全にアクセス・ダウンロードできるため,。
